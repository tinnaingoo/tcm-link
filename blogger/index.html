<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="../blogger/css/main.css">
<link rel="stylesheet" href="../blogger/css/menu.css">
<link rel="stylesheet" href="../blogger/css/responsive-layout.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="icon" type="img/fav.jpg" href="img/fav.jpg"/>
<title id="page-title">Blogger Posts</title>
<style>
    
    .loader
{  
 position:absolute;  
 top:50%;  
 left:50%;  
 transform:translate(-50%,-50%);  
 width:150px;  
 height:150px;  
 background:transparent;  
 border:3px solid #3c3c3c;  
 border-radius:50%;  
 text-align:center;  
 line-height:150px;  
 font-family:sans-serif;  
 font-size:20px;  
 color:#fff000;  
 letter-spacing:4px;  
 text-transform:uppercase;  
 text-shadow:0 0 10px #fff000;  
 box-shadow:0 0 20px rgba(0,0,0,.5);  
}  
.loader:before  
{  
 content:'';  
 position:absolute;  
 top:-3px;  
 left:-3px;  
 width:100%;  
 height:100%;  
 border:3px solid transparent;  
 border-top:3px solid #fff000;  
 border-right:3px solid #fff000;  
 border-radius:50%;  
 animation:animateC 2s linear infinite;  
}  
.loader span  
{  
 display:block;  
 position:absolute;  
 top:calc(50% - 2px);  
 left:50%;  
 width:50%;  
 height:4px;  
 background:transparent;  
 transform-origin:left;  
 animation:animate 2s linear infinite;  
}  
.loader span:before  
{  
 content:'';  
 position:absolute;  
 width:16px;  
 height:16px;  
 border-radius:50%;  
 background:#fff000;  
 top:-6px;  
 right:-8px;  
 box-shadow:0 0 20px #fff000;  
}  
@keyframes animateC  
{  
 0%  
 {  
  transform:rotate(0deg);  
 }  
 100%  
 {  
  transform:rotate(360deg);  
 }  
}  
@keyframes animate  
{  
 0%  
 {  
  transform:rotate(45deg);  
 }  
 100%  
 {  
  transform:rotate(405deg);  
 }  
}  
</style>
</head>
<body>
<nav class="menu">
    <div class="toggle-nav">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <ul class="menu-list">
        <li><a href="#">Home</a></li>
        <li><a href="#">My Work</a></li>
        <li><a href="#">About Me</a></li>
        <li><a href="#">Get in Touch</a></li>
        <li><a href="#">Blog</a></li>
    </ul>
    <div class="search-container">
        <a id="title">TC-Myaing</a>
    </div>
</nav>

<div class="container-main">
    <div class="row">
        <div class="col-12 col-s-12 col-m-9 col-l-9 col-xl-9">
            <div class="container-box" id="blog-posts">
                <div class="loader" id="loader">Loading
                <span></span>
                </div>
                <!-- Blog posts will be dynamically inserted here -->
            </div>
        </div>
        <div class="col-12 col-s-12 col-m-3 col-l-3 col-xl-3">
            <div class="aside">
                <div class="slide-box">
                    <h2 class="title">Additional information</h2>
                    <div class="info-grid" id="post-info">
                        <!-- Post information will be dynamically inserted here -->
                    </div>
                </div>
                <div class="subscribe-section">
                    <p class="s-title">Subscribe to Our YouTube Channel</p>
                    <div class="container">
                        <a href="https://www.youtube.com/@tcmyaing"><button class="subscribe-btn">Subscribe</button></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="footer">
    <p>Copyright Â© 2024 TC-Myaing</p>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const apiKey = 'AIzaSyAJj6cUNnF3KFspd69h2hLa-P0YAnbmE2w';
    const blogId = '8069277289488798331';
    let nextPageToken = null;
    const fetchedPostIds = new Set();

    const loader = document.getElementById('loader');
    const blogPostsContainer = document.getElementById('blog-posts');

    function fetchPosts() {
        loader.style.display = 'block';
        let url = `https://www.googleapis.com/blogger/v3/blogs/${blogId}/posts?key=${apiKey}&maxResults=10`;
        if (nextPageToken) {
            url += `&pageToken=${nextPageToken}`;
        }

        fetch(url)
            .then(response => response.json())
            .then(data => {
                const posts = data.items;
                nextPageToken = data.nextPageToken;

                posts.forEach((post, index) => {
                    if (!fetchedPostIds.has(post.id)) {
                        fetchedPostIds.add(post.id);

                        const postElement = document.createElement('div');
                        postElement.classList.add('post_box');
                        let postImage = '';
                        if (post.images && post.images.length > 0) {
                            postImage = `<img src="${post.images[0].url}" alt="Post Image">`;
                        }

                        let labels = '';
                        if (post.labels && post.labels.length > 0) {
                            labels = post.labels.map((label, idx) => {
                                const colorClass = `label-color-${idx % 5}`;
                                return `<span class="post-label ${colorClass}">${label}</span>`;
                            }).join(' ');
                        }

                        postElement.innerHTML = `
                            <h2><a href="../blogger/post.html?post=${post.id}">${post.title}</a></h2>
                            <div class="news_meta">Posted on ${new Date(post.published).toLocaleDateString()} | Tags: ${labels}</div>
                            <div class="image_wrapper">${postImage}</div>
                            <p align="justify">${post.content.substring(0, 200)}...<a href="#" class="continue" data-post-id="${post.id}">Continue ...</a></p>
                            <div class="cleaner"></div>
                        `;
                        blogPostsContainer.insertBefore(postElement, loader);
                    }
                });

                document.querySelectorAll('.continue').forEach(element => {
                    element.addEventListener('click', function(event) {
                        event.preventDefault();
                        const postId = this.getAttribute('data-post-id');
                        window.location.href = `../blogger/post.html?post=${postId}`;
                    });
                });

                loader.style.display = 'none';

                if (!nextPageToken) {
                    window.removeEventListener('scroll', handleScroll);
                }
            })
            .catch(error => {
                console.error('Error fetching Blogger posts:', error);
                loader.style.display = 'none';
            });
    }

    function handleScroll() {
        if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {
            fetchPosts();
        }
    }

    window.addEventListener('scroll', handleScroll);
    fetchPosts();
});
</script>
</body>
</html>
