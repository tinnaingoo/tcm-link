<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/menu.css">
<link rel="stylesheet" href="css/responsive-layout.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="icon" type="img/fav.jpg" href="img/fav.jpg"/>
<title id="page-title">Post Details</title>
</head>
<body>
<nav class="menu">
    <div class="toggle-nav">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <ul class="menu-list">
        <li><a href="#">Home</a></li>
        <li><a href="#">My Work</a></li>
        <li><a href="#">About Me</a></li>
        <li><a href="#">Get in Touch</a></li>
        <li><a href="#">Blog</a></li>
    </ul>
    <div class="search-container">
        <a id="title">TC-Myaing</a>
    </div>
</nav>

<div class="container-main">
    <div class="row">
        <div class="col-12 col-s-12 col-m-9 col-l-9 col-xl-9">
            <div class="container-box" id="post-details">
                <!-- Post details will be dynamically inserted here -->
            </div>
        </div>
        <div class="col-12 col-s-12 col-m-3 col-l-3 col-xl-3">
            <div class="aside">
                <div class="slide-box">
                    <h2 class="title">Additional information</h2>
                    <div class="info-grid" id="post-info">
                        <!-- Post information will be dynamically inserted here -->
                    </div>
                </div>
                <div class="subscribe-section">
                    <p class="s-title">Subscribe to Our YouTube Channel</p>
                    <div class="container">
                        <a href="https://www.youtube.com/@tcmyaing"><button class="subscribe-btn">Subscribe</button></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="footer">
    <p>Copyright Â© 2024 TC-Myaing</p>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const apiKey = 'AIzaSyAJj6cUNnF3KFspd69h2hLa-P0YAnbmE2w';
    const blogId = '8069277289488798331';

    const urlParams = new URLSearchParams(window.location.search);
    const postId = urlParams.get('postId');

    if (!postId) {
        window.location.href = 'index.html'; // Redirect to homepage if no postId parameter is provided
        return;
    }

    fetch(`https://www.googleapis.com/blogger/v3/blogs/${blogId}/posts/${postId}?key=${apiKey}`)
        .then(response => response.json())
        .then(post => {
            const postDetailsContainer = document.getElementById('post-details');
            postDetailsContainer.innerHTML = '';

            let postImage = '';
            if (post.images && post.images.length > 0) {
                postImage = `<img src="${post.images[0].url}" alt="Post Image">`;
            }
            postDetailsContainer.innerHTML = `
                <h1>${post.title}</h1>
                ${postImage}
                <div>${post.content}</div>
            `;

            const postInfoContainer = document.getElementById('post-info');
            postInfoContainer.innerHTML = `
                <div class="info-item">
                    <label>Author</label>
                    <div class="info-value">${post.author.displayName}</div>
                </div>
                <div class="info-item">
                    <label>Published</label>
                    <div class="info-value">${new Date(post.published).toLocaleDateString()}</div>
                </div>
                <div class="info-item">
                    <label>Labels</label>
                    <div class="info-value">${post.labels ? post.labels.join(', ') : 'No labels'}</div>
                </div>
            `;
        })
        .catch(error => console.error('Error fetching post details:', error));
});
</script>
</body>
</html>
